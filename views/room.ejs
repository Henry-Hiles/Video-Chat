<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <script>
            const ROOM_ID = "<%= roomId %>"
        </script>
        <script
            defer
            src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"
        ></script>
        <script src="/socket.io/socket.io.js" defer></script>
        <script src="scripts/login.js" defer></script>
        <script src="scripts/share.js" defer></script>
        <script src="scripts/video.js" type="module" defer></script>
        <link rel="stylesheet" href="style.css" />
        <title>Video Chat</title>
    </head>
    <body>
        <div id="login" class="done">
            <h1 class="large-header">Login</h1>
            <div>
                <input id="name-input" type="text" placeholder="Username" />
                <button class="button-circle" id="name">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="16"
                        height="16"
                        fill="currentColor"
                        class="bi bi-pencil"
                        viewBox="0 0 16 16"
                    >
                        <path
                            d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"
                        />
                    </svg>
                </button>
            </div>
        </div>
        <div id="novideo">
            <h1 class="medium-header">No Video / Audio Device Found</h1>
            <div>
                <p>
                    You either denied access to a video/audio device, or one was
                    not found.
                </p>
                <p>
                    Please make sure you have a microphone and webcam/camera.
                    <br />
                    Once you are done please
                    <a href="javascript:window.location.reload()">reload</a>.
                </p>
            </div>
        </div>
        <main><div id="videos"></div></main>
        <div id="options" class="card">
            <div id="change-name">
                <span id="name-display"></span>
                <button class="button-circle">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="25"
                        height="25"
                        fill="currentColor"
                        class="bi bi-check-circle-fill"
                        viewBox="0 0 16 16"
                    >
                        <path
                            d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"
                        />
                    </svg>
                </button>
            </div>
            <button id="share">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    fill="currentColor"
                    class="bi bi-share"
                    viewBox="0 0 16 16"
                >
                    <path
                        d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5zm-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z"
                    />
                </svg>
            </button>
        </div>

        <div id="popup" class="dismissed">
            <h1 class="medium-header">Share</h1>
            <hr />

            <div class="input-group">
                <input type="text" id="href" readonly class="input-field" />
                <button class="input-item" id="copy">Copy</button>
            </div>

            <span id="is-copied">Copied to clipboard</span>

            <button id="close">&#10005;</button>
        </div>

        <template id="video-template">
            <div class="video">
                <span class="name card"></span>
                <video></video>
            </div>
        </template>
    </body>
</html>
